<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>仙人指路神獸七十二型人格 一鍵分析</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    body { background:#f8fafc; }
    .card { background:#fff; border-radius:1rem; padding:1.5rem; box-shadow:0 2px 8px rgba(0,0,0,0.08); }
    .score { display:flex; align-items:center; gap:10px; margin-top:6px; font-size:14px; }
    .bar { flex:1; height:10px; background:#e2e8f0; border-radius:9999px; overflow:hidden; }
    .bar > i { display:block; height:100%; background:#6366f1; }
    .score b { width:90px; display:inline-block; }
    .score em { width:40px; text-align:right; font-style:normal; }
  </style>
</head>
<body class="text-slate-800">
  <div class="max-w-6xl mx-auto p-6 space-y-6">

    <!-- 標題 -->
    <header class="flex justify-between items-center">
      <h1 class="text-2xl font-bold">仙人指路神獸七十二型人格｜一鍵分析</h1>
      <div class="flex gap-2">
        <input type="color" id="bgColor" title="背景顏色">
        <input type="file" id="bgImg" accept="image/*" title="上傳背景圖">
      </div>
    </header>

    <!-- 模式切換 -->
    <div class="flex gap-4">
      <button id="modeSingle" class="px-4 py-2 rounded-xl bg-indigo-600 text-white">單人分析</button>
      <button id="modeDual" class="px-4 py-2 rounded-xl bg-slate-200">雙人分析</button>
    </div>

    <!-- 我方 / 對方 -->
    <div class="grid md:grid-cols-2 gap-4">
      <!-- 我方 -->
      <section class="card">
        <h2 class="font-semibold mb-3">我方 <span id="labelA" class="text-sm text-slate-500">(分析主體)</span></h2>
        <select id="aBeast" class="w-full mb-2 border rounded-lg p-2">
          <option value="">六獸</option>
          <option>青龍</option><option>朱雀</option><option>勾陳</option>
          <option>螣蛇</option><option>白虎</option><option>玄武</option>
        </select>
        <select id="aKin" class="w-full mb-2 border rounded-lg p-2">
          <option value="">六親</option>
          <option>父母</option><option>兄弟</option><option>子孫</option>
          <option>妻財</option><option>官鬼</option>
        </select>
        <select id="aBranch" class="w-full border rounded-lg p-2">
          <option value="">地支</option>
          <option>子</option><option>丑</option><option>寅</option><option>卯</option>
          <option>辰</option><option>巳</option><option>午</option><option>未</option>
          <option>申</option><option>酉</option><option>戌</option><option>亥</option>
        </select>
      </section>

      <!-- 對方 -->
      <section id="sectionB" class="card">
        <h2 class="font-semibold mb-3">對方</h2>
        <select id="bBeast" class="w-full mb-2 border rounded-lg p-2">
          <option value="">六獸</option>
          <option>青龍</option><option>朱雀</option><option>勾陳</option>
          <option>螣蛇</option><option>白虎</option><option>玄武</option>
        </select>
        <select id="bKin" class="w-full mb-2 border rounded-lg p-2">
          <option value="">六親</option>
          <option>父母</option><option>兄弟</option><option>子孫</option>
          <option>妻財</option><option>官鬼</option>
        </select>
        <select id="bBranch" class="w-full border rounded-lg p-2">
          <option value="">地支</option>
          <option>子</option><option>丑</option><option>寅</option><option>卯</option>
          <option>辰</option><option>巳</option><option>午</option><option>未</option>
          <option>申</option><option>酉</option><option>戌</option><option>亥</option>
        </select>
      </section>
    </div>

    <!-- 情境 -->
    <section class="card space-y-2">
      <h2 class="font-semibold">情境</h2>
      <div class="flex gap-2 flex-wrap">
        <button class="preset px-3 py-1.5 rounded-full bg-slate-100">人際關係</button>
        <button class="preset px-3 py-1.5 rounded-full bg-slate-100">性愛</button>
      </div>
      <input id="context" class="w-full border rounded-lg p-2" placeholder="輸入情境…" />
    </section>

    <!-- 操作 -->
    <div class="flex gap-3">
      <button id="go" class="px-4 py-2 rounded-xl bg-indigo-600 text-white">一鍵分析</button>
      <button id="print" class="px-4 py-2 rounded-xl bg-slate-200">列印 / 匯出 PDF</button>
      <span id="status" class="text-sm text-slate-600"></span>
    </div>

    <!-- 結果 -->
    <section class="card">
      <div id="result" class="prose max-w-none text-[15px]"></div>
      <div id="chart" class="mt-4"></div>
    </section>

  </div>

<script>
const $ = s => document.querySelector(s);
let radarChart = null;

// 模式切換
function setAnalysisMode(mode) {
  if(mode==='single'){
    $('#sectionB').style.display='none';
    $('#labelA').textContent='(分析主體)';
  } else {
    $('#sectionB').style.display='block';
    $('#labelA').textContent='';
  }
}
document.getElementById('modeSingle').onclick=()=>setAnalysisMode('single');
document.getElementById('modeDual').onclick=()=>setAnalysisMode('dual');

// 預設情境按鈕
document.querySelectorAll('.preset').forEach(b=>{
  b.onclick=()=>{ $('#context').value=b.textContent; };
});

// 背景設定
document.getElementById('bgColor').oninput = e => {
  document.body.style.background = e.target.value;
};
document.getElementById('bgImg').onchange = e => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    document.body.style.backgroundImage = `url(${ev.target.result})`;
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundAttachment = 'fixed';
  };
  reader.readAsDataURL(file);
};

// 分數 + 雷達
function renderRadar(scores){
  const wrap=document.getElementById('chart');
  wrap.innerHTML='';
  if(!scores) return;
  const canvas=document.createElement('canvas'); wrap.appendChild(canvas);
  if(radarChart) radarChart.destroy();
  radarChart=new Chart(canvas.getContext('2d'),{
    type:'radar',
    data:{ labels:['契合','溝通','節奏','權責','信任','創新'],
      datasets:[{label:'六維度',data:Object.values(scores),fill:true,
        backgroundColor:'rgba(99,102,241,0.15)',
        borderColor:'rgba(99,102,241,1)',
        pointBackgroundColor:'rgba(99,102,241,1)'}]},
    options:{scales:{r:{suggestedMin:0,suggestedMax:100,ticks:{stepSize:20}}},
    plugins:{legend:{display:false}}}
  });
}

// 模擬 API
document.getElementById('go').onclick=()=>{
  $('#status').textContent='分析中…';
  setTimeout(()=>{
    const scores={fit:78,comm:72,pace:65,account:70,trust:68,innov:80};
    $('#result').innerHTML=`
      <h3 class="text-lg font-semibold">分析結果</h3>
      <p>這是一個模擬的分析內容，顯示人格與互動的特徵。</p>
      <div class="score"><b>契合</b><div class="bar"><i style="width:${scores.fit}%"></i></div><em>${scores.fit}</em></div>
      <div class="score"><b>溝通</b><div class="bar"><i style="width:${scores.comm}%"></i></div><em>${scores.comm}</em></div>
      <div class="score"><b>節奏</b><div class="bar"><i style="width:${scores.pace}%"></i></div><em>${scores.pace}</em></div>
      <div class="score"><b>權責</b><div class="bar"><i style="width:${scores.account}%"></i></div><em>${scores.account}</em></div>
      <div class="score"><b>信任</b><div class="bar"><i style="width:${scores.trust}%"></i></div><em>${scores.trust}</em></div>
      <div class="score"><b>創新</b><div class="bar"><i style="width:${scores.innov}%"></i></div><em>${scores.innov}</em></div>
    `;
    renderRadar(scores);
    $('#status').textContent='✅ 完成';
  },1000);
};
setAnalysisMode('dual');
</script>
</body>
</html>
